(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{359:function(a,s,e){"use strict";e.r(s);var n=e(2),t=Object(n.a)({},function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("p",[a._v("如果还未了解过 Docker, 建议先阅读上一篇文章 "),e("a",{attrs:{href:"http://mp.weixin.qq.com/s?__biz=MzIyMDQyNTc3OA==&mid=2247483767&idx=1&sn=fbf540263518d02ad6fb05d4d9ba1801&chksm=97cd7a2aa0baf33c9c8476654733d5ae136d12daa2524d2d711483921146bd563e9ca54cec79&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[a._v("初识 Docker"),e("OutboundLink")],1),a._v("。")]),a._v(" "),e("hr"),a._v(" "),e("p",[a._v("仓库（Repository）就是存放镜像的地方。类似于 "),e("code",[a._v("Node")]),a._v(" 的 "),e("code",[a._v("npm")]),a._v("； "),e("code",[a._v("Python")]),a._v(" 的 "),e("code",[a._v("PyPi")]),a._v("。")]),a._v(" "),e("p",[a._v("注册服务器（Registry）的概念比较容易与仓库混淆。实际上注册服务器是用来管理仓库的服务器，一个服务器上可以存在多个仓库，而每个仓库下可以有多个镜像。")]),a._v(" "),e("p",[a._v("例如对于仓库地址 "),e("code",[a._v("hub.dockerpool.com/nginx")]),a._v(" 来说，"),e("code",[a._v("hub.dockerpool.com")]),a._v(" 是注册服务器的地址，"),e("code",[a._v("nginx")]),a._v(" 是仓库名。")]),a._v(" "),e("h2",{attrs:{id:"docker-hub"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-hub","aria-hidden":"true"}},[a._v("#")]),a._v(" Docker Hub")]),a._v(" "),e("p",[a._v("目前 Docker 官方维护的一个公共仓库，大部分需求我们都可以从 Docker Hub 中直接下载镜像来实现。")]),a._v(" "),e("h3",{attrs:{id:"注册"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注册","aria-hidden":"true"}},[a._v("#")]),a._v(" 注册")]),a._v(" "),e("p",[a._v("我们可以在 https://hub.docker.com/ 注册一个 Docker 账号。")]),a._v(" "),e("h3",{attrs:{id:"登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#登录","aria-hidden":"true"}},[a._v("#")]),a._v(" 登录")]),a._v(" "),e("p",[a._v("可以通过 "),e("code",[a._v("docker login")]),a._v(" 命令在终端输入用户名及密码来完成 Docker Hub 的登录。")]),a._v(" "),e("p",[a._v("我们也可以通过 "),e("code",[a._v("docker logout")]),a._v(" 退出登录。")]),a._v(" "),e("h3",{attrs:{id:"镜像分类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#镜像分类","aria-hidden":"true"}},[a._v("#")]),a._v(" 镜像分类")]),a._v(" "),e("p",[a._v("通过上一篇文章可以知道，使用 "),e("code",[a._v("docker search")]),a._v(" 搜索镜像时，搜索出来可以看到下面的镜像列表。")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ docker search nginx\nNAME                              DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\nnginx                             Official build of Nginx.                        12036               "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\njwilder/nginx-proxy               Automated Nginx reverse proxy "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" docker con…   1671                                    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nricharvey/nginx-php-fpm           Container running Nginx + PHP-FPM capable of…   742                                     "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nlinuxserver/nginx                 An Nginx container, brought to you by LinuxS…   78\nbitnami/nginx                     Bitnami nginx Docker Image                      71                                      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\ntiangolo/nginx-rtmp               Docker image with Nginx using the nginx-rtmp…   56                                      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nnginxdemos/hello                  NGINX webserver that serves a simple page co…   28                                      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\njlesage/nginx-proxy-manager       Docker container "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" Nginx Proxy Manager        24                                      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\njc21/nginx-proxy-manager          Docker container "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" managing Nginx proxy ho…   24\nnginx/nginx-ingress               NGINX Ingress Controller "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" Kubernetes         22\nprivatebin/nginx-fpm-alpine       PrivateBin running on an Nginx, php-fpm "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v(" Al…   18                                      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nschmunk42/nginx-redirect          A very simple container to redirect HTTP tra…   17                                      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nblacklabelops/nginx               Dockerized Nginx Reverse Proxy Server.          12                                      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br")])]),e("p",[a._v("根据是否是官方提供，可以将镜像分为两类。")]),a._v(" "),e("p",[a._v("一类是类似 "),e("code",[a._v("nginx")]),a._v(" 这样的镜像，被称为基础镜像或跟镜像。这些基础镜像由 Docker 公司创建、验证、支持、提供。这样的镜像往往使用单个单词作为名字。")]),a._v(" "),e("p",[a._v("还有一种类型，比如 "),e("code",[a._v("feiben/nginx")]),a._v(" 镜像，它是由 Docker Hub 的注册用户创建并维护的，往往带有用户名称前缀。可以通过前缀 "),e("code",[a._v("username/")]),a._v(" 来指定使用某个用户提供的镜像，比如 "),e("code",[a._v("feiben")]),a._v(" 用户。")]),a._v(" "),e("h3",{attrs:{id:"推送镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#推送镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 推送镜像")]),a._v(" "),e("p",[a._v("用户登录后可以通过 "),e("code",[a._v("docker push")]),a._v(" 命令来把自己的镜像推送到 Docker Hub，例如将 "),e("code",[a._v("nginx")]),a._v(" 镜像改成我们自己的镜像，然后推送到 Docker Hub。")]),a._v(" "),e("p",[a._v("首先通过 "),e("code",[a._v("docker pull nginx")]),a._v(" 将 "),e("code",[a._v("nginx")]),a._v(" 镜像下载到本地。")]),a._v(" "),e("p",[a._v("给 "),e("code",[a._v("nginx")]),a._v(" 添加标签 "),e("code",[a._v("docker tag nginx feiben/nginx:1.17.5")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nfeiben/nginx        1.17.5              f949e7d76d63        2 weeks ago         126MB\nnginx               latest              f949e7d76d63        2 weeks ago         126MB\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("p",[a._v("将自己的镜像推送到 Docker Hub")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ docker push feiben/nginx:1.17.5\nThe push refers to repository "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("docker.io/feiben/nginx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n509a5ea4aeeb: Mounted from library/nginx\n3bb51901dfa3: Mounted from library/nginx\n2db44bce66cd: Mounted from library/nginx\n1.17.5: digest: sha256:066edc156bcada86155fd80ae03667cf3811c499df73815a2b76e43755ebbc76 size: 948\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br")])]),e("p",[a._v("稍等片刻，我们就可以搜索出推送的镜像了")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ docker search feiben\nNAME                DESCRIPTION         STARS               OFFICIAL            AUTOMATED\nfeiben/nginx                            0\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("h3",{attrs:{id:"自动构建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自动构建","aria-hidden":"true"}},[a._v("#")]),a._v(" 自动构建")]),a._v(" "),e("p",[a._v("我们可以通过 Docker Hub 指定跟踪一个目标网站（支持 GitHub 或 BitBucket）上的项目，项目一旦有新的提交或者创建了新标签，将会触发 Docker Hub 自动构建镜像并推送到 Docker Hub中。")]),a._v(" "),e("p",[a._v("设置自动构建的步骤如下：")]),a._v(" "),e("ol",[e("li",[a._v("登录 Docker Hub")]),a._v(" "),e("li",[a._v("点击头像，选择 Account Setting 再选择 Linked Accounts 管理账号")]),a._v(" "),e("li",[a._v("在 Docker Hub 中新建或选择已有的仓库，在 Builds 选项卡中选择 Configure Automated Builds")]),a._v(" "),e("li",[a._v("选取一个目标网站中的项目（需要含 Dockerfile）和分支")]),a._v(" "),e("li",[a._v("指定 Dockerfile 的位置，并保存")])]),a._v(" "),e("p",[a._v("完成自动构建配置之后，指定的分支一旦提交代码就会触发自动构建，我们可以在仓库页面的 Timeline 选项卡中查看每次构建的状态。")]),a._v(" "),e("p",[a._v("除了 Docker Hub 的自动构建外，我们也可以使用 Travis CI 等持续集成工具来实现自动构建。")]),a._v(" "),e("h2",{attrs:{id:"私有仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#私有仓库","aria-hidden":"true"}},[a._v("#")]),a._v(" 私有仓库")]),a._v(" "),e("p",[a._v("公司的项目一般不予许我们上传到 Docker Hub 这类的公共仓库中，所有学会创建一个私有仓库也是非常必要的。")]),a._v(" "),e("h3",{attrs:{id:"容器运行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器运行","aria-hidden":"true"}},[a._v("#")]),a._v(" 容器运行")]),a._v(" "),e("p",[a._v("我们可以通过获取官方的 "),e("code",[a._v("registry")]),a._v(" 镜像来运行。")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ docker run -d -p 5000:5000 --restart"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always --name registry registry\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("这将使用官方提供的 "),e("code",[a._v("registry")]),a._v(" 镜像来启动私有仓库。默认情况下，仓库会被创建在容器的 "),e("code",[a._v("/var/lib/registry")]),a._v(" 目录下。我们可以通过 "),e("code",[a._v("-v")]),a._v(" 参数将镜像文件存放在本地的指定路径。")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ docker run -d \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" -p 5000:5000 \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" -v /opt/data/registry:/var/lib/registry \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" --restart"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always \\\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" registry\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("p",[a._v("这时我们可以通过浏览器访问 "),e("code",[a._v("http://domain:5000/v2/_catalog")]),a._v(" 查看仓库是否启动成功。")]),a._v(" "),e("ul",[e("li",[a._v("其中 "),e("code",[a._v("domain")]),a._v(" 是你的域名或 ip 地址，下文中的 "),e("code",[a._v("domain")]),a._v(" 同理。")])]),a._v(" "),e("h3",{attrs:{id:"在私有仓库搜索、上传、下载镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在私有仓库搜索、上传、下载镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 在私有仓库搜索、上传、下载镜像")]),a._v(" "),e("h4",{attrs:{id:"上传镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#上传镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 上传镜像")]),a._v(" "),e("p",[a._v("首先使用 "),e("code",[a._v("docker tag")]),a._v(" 将本地的 "),e("code",[a._v("nginx")]),a._v(" 镜像添加标签")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ docker tag nginx:latest domain/nginx:latest\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("接下来就可以使用 "),e("code",[a._v("docker push")]),a._v(" 命令将镜像推送到我们的私有仓库中")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ docker push domain/nginx:latest\nThe push refers to repository "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("domain/nginx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nGet https://domain/v2/: EOF\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("p",[a._v("出现上面的提示时，说明推送失败了。因为 Docker 默认使用 HTTPS 的方式推送镜像。我们可以通过 Docker 的配置来取消这个限制。")]),a._v(" "),e("p",[a._v("对于 Linux 系统，我们可以在 "),e("code",[a._v("/etc/docker/deamon.json")]),a._v(" （"),e("code",[a._v("deamon.josn")]),a._v(" 文件不存在则新建该文件）添加下面的配置")]),a._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"insecure-registries"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"domain:5000"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("对于桌面版，我们可以在 Docker 的设置 "),e("code",[a._v("Daemon")]),a._v(" 选项中的 "),e("code",[a._v("Insecure registries")]),a._v(" 中加上 "),e("code",[a._v("domain:5000")]),a._v("。")]),a._v(" "),e("p",[a._v("【注】如果仓库主机是远程服务器的话，需要将服务器与本地的 docker 配置进行修改")]),a._v(" "),e("p",[a._v("设置完成后再使用上面的命令进行推送。除了上面这种方式外，我们也可以将私有仓库的地址配置成支持 "),e("code",[a._v("HTTPS")]),a._v(" 访问的，本文就不作展开了。")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ docker push domain:5000/nginx:latest\nThe push refers to repository "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("domain:5000/nginx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n509a5ea4aeeb: Pushed\n3bb51901dfa3: Pushed\n2db44bce66cd: Pushed\nlatest: digest: sha256:066edc156bcada86155fd80ae03667cf3811c499df73815a2b76e43755ebbc76 size: 948\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br")])]),e("p",[a._v("当看到上面的信息时，说明已经推送成功了。我们可以再次访问 "),e("code",[a._v("http://domain:5000/v2/_catalog")]),a._v(" 进行验证")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" http://domain:5000/v2/_catalog\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"repositories"')]),a._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"nginx"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("p",[a._v("看到这个说明上传成功了。")]),a._v(" "),e("h4",{attrs:{id:"搜索镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#搜索镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 搜索镜像")]),a._v(" "),e("p",[a._v("搜索私有仓库的镜像并不能用 "),e("code",[a._v("docker search")]),a._v(" 命令, 只能通过 "),e("code",[a._v("http://domain:5000/v2/image_name/tags/list")]),a._v(" 查看指定镜像存在的 "),e("code",[a._v("tag")]),a._v(" 列表")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" domain:5000/v2/nginx/tags/list\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"name"')]),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"nginx"')]),a._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"tags"')]),a._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"latest"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h4",{attrs:{id:"下载镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 下载镜像")]),a._v(" "),e("p",[a._v("首先我们通过 "),e("code",[a._v("docker rmi")]),a._v(" 将本地的镜像删除（取消标签）。")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ docker rmi domain:5000/nginx\nUntagged: domain:5000/nginx:latest\nUntagged: domain:5000/nginx@sha256:066edc156bcada86155fd80ae03667cf3811c499df73815a2b76e43755ebbc76\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("p",[a._v("再使用 "),e("code",[a._v("docker images")]),a._v(" 确认 "),e("code",[a._v("domain:5000/nginx")]),a._v(" 这个镜像在本地不存在，接下来我们就可以从私有仓库进行下载。")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("$ docker pull domain:5000/nginx:latest\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("除了使用官方提供的 Registry，我们也可以使用 Nexus3.x 来创建仓库，关于如何使用 Nexus 版本的仓库将放到下一篇文章中。当然你也可以从 https://docker_practice.gitee.io/zh-cn/repository/nexus3_registry.html 学习。")]),a._v(" "),e("hr"),a._v(" "),e("p",[a._v("如果你喜欢我的文章，希望可以关注一下我的公众号【前端develop】")]),a._v(" "),e("p",[e("img",{attrs:{src:"/imgs/qrcode.png",alt:"前端develop"}})])])},[],!1,null,null,null);s.default=t.exports}}]);